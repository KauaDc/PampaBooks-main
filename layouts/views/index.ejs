
<div class="container">

    <div class="row">
    <h1 class="text-center">Catálogo</h1>
    <div id="cartModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <p>Livro adicionado ao carrinho!</p>
          <button id="goToCart" class="btn-modal">Ir para o Carrinho</button>
          <button id="continueShopping" class="btn-modal">Continuar Comprando</button>
        </div>
      </div>
    <div class="col-lg-3 filtros">
    <hr>
    
    <h5>Categorias</h5>
    <% if (Array.isArray(categorias) && categorias.length > 0) { %>
    <% categorias.forEach(categoria => { %>
    <div class="form-group">
    <label for="<%= categoria._id %>"><%= categoria.nome %> ( <%= categoria.quantLivros %> )</label>
    </div>
    <% }) %>
    <% } else { %>
    <p>Nenhuma categoria disponível.</p>
    <% } %>
    </div>
    
    <div class="col-lg-9">

                <div class="col-lg-9">
                <div class="row">
                <% if (Array.isArray(livros) && livros.length > 0) { %>
                <% livros.forEach(livro => { %>
                <div class="col-md-5 mb-4">
                <div class="card" >
                <div class="header">
                    <a href="livros/<%= livro._id %>">
                <div class="image ">
                <img src="data:image/jpeg;base64,<%= livro.capa %>" alt="Capa do Livro" >
                <span class="tag categoria"><%= livro.categorias.nome %></span>
                <% const preco1 = livro.preco
                let preco2 = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(preco1)
                %>
                <span class="tag preco "><%= preco2 %></span>
                </div>
            </a>
                </div>
                <div class="info">
                <span class="title"><%= livro.titulo %></span>
                </a>
                <p class="description autor"><%= livro.autor %></p>
                <% if (usuario) { %>
                <form action="/criarpedido" method="post">
                <input type="hidden" name="livroId" value="<%= livro._id %>">
                <input type="hidden" name="preco" value="<%= livro.preco %>">
                <div class="botao-container">
                <button type="submit" id="btn-carrinho" onclick="showModal()" class="btn btn-primary"><i class="fa-solid fa-cart-plus"></i></button>
                </form>
                
              </div>
              <% } else { %>
                <a href="/login" class="btn btn-success">Faça para adicionar ao carrinho</a>
                <% } %>
                </div>
                </div>
                </div>
                <% }); %>
                <% } else { %>
                <p>Nenhum livro disponível no momento.</p>
                <% } %>
                </div>
                </div>
                </div>
                </div>
        
                <script>

                    </script>